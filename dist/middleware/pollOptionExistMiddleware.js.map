{"version":3,"sources":["../../src/middleware/pollOptionExistMiddleware.js"],"names":["mongodb","require","module","exports","req","res","next","poll_option_id","body","db","app","get","pollOptionCollection","collection","findOneAsync","_id","ObjectID","pollOption","rest","forbidden","message"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACAC,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACnC,MAAMC,iBAAiBH,IAAII,IAAJ,CAASD,cAAhC;AACA,MAAI,CAACA,cAAL,EACED;AACF,MAAMG,KAAKL,IACRM,GADQ,CAERC,GAFQ,CAEJ,IAFI,CAAX;AAGA,MAAMC,uBAAuBH,GAAGI,UAAH,CAAc,YAAd,CAA7B;AACA,6DAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAE0BD,qBAAqBE,YAArB,CAAkC;AACvDC,mBAAK,IAAIf,QAAQgB,QAAZ,CAAqBT,cAArB;AADkD,aAAlC,CAF1B;;AAAA;AAEOU,sBAFP;;AAKG,gBAAI,CAACA,UAAL,EACEZ,IAAIa,IAAJ,CAASC,SAAT,CAAmB,8BAAnB,EADF,KAGEb;AARL;AAAA;;AAAA;AAAA;AAAA;;AAUG,gBAAI,YAAIc,OAAR,EACE,cAAM,YAAIA,OAAV;AACFf,gBACGa,IADH,CAEGC,SAFH;;AAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD;AAiBD,CAzBD","file":"pollOptionExistMiddleware.js","sourcesContent":["const mongodb = require('mongodb');\r\nmodule.exports = (req, res, next) => {\r\n  const poll_option_id = req.body.poll_option_id;\r\n  if (!poll_option_id) \r\n    next();\r\n  const db = req\r\n    .app\r\n    .get('db');\r\n  const pollOptionCollection = db.collection('pollOption');\r\n  (async() => {\r\n    try {\r\n      let pollOption = await pollOptionCollection.findOneAsync({\r\n        _id: new mongodb.ObjectID(poll_option_id)\r\n      });\r\n      if (!pollOption) \r\n        res.rest.forbidden('pollOption Id does not exist');\r\n      else \r\n        next()\r\n    } catch (err) {\r\n      if (err.message) \r\n        err = err.message;\r\n      res\r\n        .rest\r\n        .forbidden(err)\r\n    }\r\n  })();\r\n};\r\n"]}